import{K as j,j as e,L as u,$ as b}from"./app-CTaP4zQ4.js";import{A as v,a as p}from"./app-layout-6JYdJ8Xa.js";import{B as t}from"./app-logo-icon-yqA5uqx2.js";import"./index-RZEbdMdX.js";import"./index-Bd50ex30.js";function A(){const{props:d}=j(),{totals:r,usersByExerciseReads:i,topJournalers:c,topDoers:o,recentUsers:m,generatedAt:x}=d,n=r.users?Math.round((r.activeUsers7d||0)/r.users*100):0,h=i.reduce((s,l)=>Math.max(s,l.readers_count||0),0)||1;return e.jsxs(v,{breadcrumbs:[{title:"Dashboard",href:"/admin/dashboard"}],children:[e.jsx(u,{title:"Admin Dashboard"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Dashboard"}),e.jsx("p",{className:"text-sm opacity-70",children:"Plan, monitor, and analyze engagement."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{variant:"outline",size:"sm",children:"Import Data"}),e.jsx(b,{href:"/admin/tasks/create",children:e.jsx(t,{size:"sm",children:"Add Item"})})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(a,{title:"Total Users",value:r.users,hint:"All time"}),e.jsx(a,{title:"Exercises",value:r.exercises,hint:"Published"}),e.jsx(a,{title:"Tasks",value:r.tasks,hint:"Active + Scheduled"}),e.jsx(a,{title:"Active (7d)",value:r.activeUsers7d,hint:"Users active last week"}),e.jsx(a,{title:"Task Completions (M)",value:r.taskCompletionsThisMonth||0,hint:"This month"}),e.jsx(a,{title:"Journal Entries (M)",value:r.journalEntriesThisMonth||0,hint:"This month"}),e.jsx(a,{title:"All Completions",value:r.taskCompletions,hint:"Lifetime"}),e.jsx(a,{title:"All Journals",value:r.journalEntries,hint:"Lifetime"})]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 dark:border-sidebar-border p-4",children:[e.jsx("div",{className:"font-semibold mb-3",children:"Project Analytics"}),e.jsx("ul",{className:"space-y-3",children:i.map(s=>{const l=Math.round((s.readers_count||0)/h*100);return e.jsxs("li",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("div",{className:"truncate pr-2",children:s.title}),e.jsx("div",{className:"tabular-nums opacity-70",children:s.readers_count})]}),e.jsx("div",{className:"h-2 w-full rounded bg-neutral-200/60 dark:bg-neutral-800 overflow-hidden",children:e.jsx("div",{className:"h-2 bg-emerald-500",style:{width:`${l}%`}})})]},s.id)})})]}),e.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 dark:border-sidebar-border p-4",children:[e.jsx("div",{className:"font-semibold mb-3",children:"Top Journalers"}),e.jsx("ul",{className:"space-y-2",children:c.map(s=>e.jsxs("li",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{children:["User #",s.user_id]}),e.jsx("span",{className:"tabular-nums",children:s.entries_count})]},s.user_id))})]}),e.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 dark:border-sidebar-border p-4",children:[e.jsx("div",{className:"font-semibold mb-3",children:"Engagement (7d)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative size-28 rounded-full",style:{background:`conic-gradient(#10b981 ${n}%, rgba(0,0,0,0.08) 0)`},children:e.jsx("div",{className:"absolute inset-2 rounded-full bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-xl font-semibold",children:[n,"%"]})})}),e.jsxs("div",{className:"text-sm opacity-80",children:[e.jsx("div",{className:"font-medium",children:"Active Users"}),e.jsxs("div",{children:[r.activeUsers7d||0," of ",r.users||0," were active"]})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 dark:border-sidebar-border p-4 lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"font-semibold",children:"Team Collaboration"}),e.jsx(t,{size:"sm",variant:"outline",children:"+ Add Member"})]}),e.jsx("ul",{className:"divide-y divide-neutral-200/60 dark:divide-neutral-800",children:m.map(s=>e.jsxs("li",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx(p,{src:s.avatar??void 0,alt:s.name,className:"size-8"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:s.name}),e.jsx("div",{className:"text-xs opacity-70 truncate",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium tabular-nums",children:s.tasks_done_count}),e.jsx("div",{className:"text-xs opacity-70",children:"Tasks Done"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium tabular-nums",children:s.journals_count}),e.jsx("div",{className:"text-xs opacity-70",children:"Journaled"})]})]})]},s.id))})]}),e.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 dark:border-sidebar-border p-4",children:[e.jsx("div",{className:"font-semibold mb-3",children:"Top Doers"}),e.jsx("ul",{className:"space-y-2",children:o.map(s=>e.jsxs("li",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{children:["User #",s.user_id]}),e.jsx("span",{className:"tabular-nums",children:s.done_count})]},s.user_id))})]})]}),e.jsxs("div",{className:"text-xs opacity-60",children:["Generated at ",x]})]})]})}function a({title:d,value:r,hint:i}){return e.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 dark:border-sidebar-border p-4",children:[e.jsx("div",{className:"text-xs uppercase opacity-70",children:d}),e.jsx("div",{className:"text-2xl font-semibold",children:r??0}),i&&e.jsx("div",{className:"text-xs opacity-60",children:i})]})}export{A as default};
